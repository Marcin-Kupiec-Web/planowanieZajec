
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/BasicTemplate.html">
	<ui:define name="styleCSS"><h:outputStylesheet name="css/planZajec.css" /></ui:define>	
		<ui:define name="content">
			
	<!-- dialog do dodawania nowych kursów -->
		<p:dialog header="Rejestracja kursu" id="dlgRejestracjaKusu" widgetVar="dlgRejestracjaKusu"  modal="true"  appendTo="@(body)" style="background:white;">
		<p:ajax event="close"  update="dlgRejestracjaKusu" listener="#{strukturaKursow.dialogClose}" resetValues="true" />
				<h:form id="dodajKurs" style="text-align:center">
				<p:growl id="msgsnk"/>
						<h:panelGrid columns="6" >
								<h:outputLabel for="nazwaKurs">Nazwa kursu: </h:outputLabel>
									<p:inputText id="nazwaKurs" value="#{strukturaKursow.nazwa}" style="background:beige" required="true" />
								<h:outputLabel>Kurs: </h:outputLabel>
									<p:selectOneMenu value="#{strukturaKursow.kurs}" style="background:beige!important">
										 <f:selectItem itemValue="podstawowy" itemLabel="podstawowy"/>
										  <f:selectItem itemValue="specjalistyczny" itemLabel="specjalistyczny"/>
									</p:selectOneMenu>
								<h:outputLabel for="modolKurs">Modół: </h:outputLabel>
									<p:inputText id="modolKurs" value="#{strukturaKursow.jModol}" style="background:beige" required="true"/>
								<h:outputLabel>Jednostka szkolna: </h:outputLabel>
									<p:inputText value="#{strukturaKursow.jSzkol}" />
								<h:outputLabel for="zagadnienieKurs">Zagadnienie: </h:outputLabel>
									<p:inputText id="zagadnienieKurs" value="#{strukturaKursow.kpn}" style="background:beige" required="true"/>
								<h:outputLabel>Komentarz: </h:outputLabel>
									<p:inputTextarea value="#{strukturaKursow.komentarz}" />
								<h:outputLabel for="ileGodzinKurs">Ile godzin: </h:outputLabel>
									<p:inputText id="ileGodzinKurs" value="#{strukturaKursow.ileGodzin}" style="background:beige" required="true"/>
						</h:panelGrid>
						<p:commandButton  action="#{strukturaKursow.addKurs}" value="Zapisz" icon="ui-icon-calculator" update=":formKursy:kursy,:dodajKurs,:dodajKurs:msgsnk" style="margin:20px;width:90%;padding:5px"/>
				</h:form>	
		</p:dialog>



<!-- dialog do dodawania nowych przedmiotów do kursów -->	
	<p:dialog id="dlgRejestracjaPrzedmiotu" header="Rejestracja przedmiotu" widgetVar="dlgRejestracjaPrzedmiotu"  modal="true"  appendTo="@(body)" style="background:white;">
	<p:ajax event="close" update="dlgRejestracjaPrzedmiotu" listener="#{strukturaKursow.dialogClose}" resetValues="true" />
				<h:form style="text-align:center" id="formPrzedmiot">
				<p:growl id="msgsnp" showDetail="false"/>
						<h:panelGrid columns="4" >
								<h:outputLabel for="kpMpdol" value="#{strukturaKursow.wybranyKurs.jModol}"> </h:outputLabel>
									<p:inputText id="kpModol" value="#{strukturaKursow.modolPrzedmiot}" required="true"/>
								<h:outputLabel for="kpJszkol" value="#{strukturaKursow.wybranyKurs.jSzkol}" rendered="#{strukturaKursow.wybranyKurs.jSzkol.trim().length()>0}"/>
									<p:inputText id="kpJszkol" value="#{strukturaKursow.nazwaPrzedmiot}"  rendered="#{strukturaKursow.wybranyKurs.jSzkol.trim().length()>0}" required="true"/>
								<h:outputLabel for="kpIlegodzin">Ile godzin </h:outputLabel>
									<p:inputText id="kpIlegodzin" value="#{strukturaKursow.ileGodzinPrzedmiot}" required="true"/>
								<h:outputLabel>Komentarz: </h:outputLabel>
									<p:inputTextarea value="#{strukturaKursow.komentarzPrzedmiot}" />
						</h:panelGrid>
						<p:commandButton  actionListener="#{strukturaKursow.addPrzedmiot}" value="Zapisz" icon="ui-icon-calculator" 
						update=":formKursy:kursy:przedmiot,:formPrzedmiot:msgsnp,formPrzedmiot" style="margin:20px;width:90%;padding:5px" oncomplete="PF('dialogPrzedmioty').filter()"/>
				</h:form>	
		</p:dialog>	

<!-- dialog do dodawania nowych tematów-->	
	<p:dialog header="Rejestracja tematu" widgetVar="dlgRejestracjaTematu" id="dlgRejestracjaTematu"  modal="true"  appendTo="@(body)" style="background:white;">
	<p:ajax event="close" update="dlgRejestracjaTematu" listener="#{strukturaKursow.dialogClose}" resetValues="true" />
				<h:form style="text-align:center" id="formTemat">
				<p:growl id="msgsnt" showDetail="false"/>
						<h:panelGrid columns="6" >
								<h:outputLabel value="Nazwa:" />
									<p:inputText value="#{strukturaKursow.nazwaTemat}" required="true"/>
								<h:outputLabel value="Korelacja" />
									<p:inputText value="#{strukturaKursow.korelacja}" required="true"/>
								<h:outputLabel value="Ile godzin:" />
									<p:inputText value="#{strukturaKursow.ileGodzinTemat}" required="true"/>
								<h:outputLabel value="Ilu nauczycieli:" />
									<p:inputText value="#{strukturaKursow.ileNauczyciel}" required="true"/>
										<h:outputLabel value="Komentarz:" />
									<p:inputTextarea value="#{strukturaKursow.komentarzTemat}"/>
								<h:outputLabel value="Zkład:"/>
										<p:selectCheckboxMenu id="multiZaklad" value="#{strukturaKursow.selectedZaklad}" label="Zakłady" multiple="true" filter="true"
																			filterMatchMode="startWith" panelStyle="width:250px" required="true">
													<f:selectItems value="#{strukturaKursow.selectedZakladListString}"/>
										</p:selectCheckboxMenu>
								<h:outputLabel value="Specjalizacja:"/>
										<p:selectCheckboxMenu id="multiSpecjal" value="#{strukturaKursow.selectedSpecjal}" label="Specjalizacje" multiple="true" filter="true"
																			filterMatchMode="startWith" panelStyle="width:250px" required="true">
													<f:selectItems value="#{strukturaKursow.selectedSpecjalListString}"/>
										</p:selectCheckboxMenu>
										<h:outputLabel value="Sale:"/>
										<p:selectCheckboxMenu  value="#{strukturaKursow.selectedSale}" label="Sale" multiple="true" filter="true"
																						filterMatchMode="startWith" panelStyle="width:250px" required="true">
																				<f:selectItems value="#{strukturaKursow.saleListGroup}" />
																		</p:selectCheckboxMenu>
						</h:panelGrid> 
						<p:commandButton  actionListener="#{strukturaKursow.addTemat}" value="Zapisz" icon="ui-icon-calculator" 
						update=":formKursy:kursy:przedmiot,:przedmiotyFinderForm:pft,:formTemat:msgsnt,:formTemat" oncomplete="PF('dialogPrzedmioty').filter(),PF('przedmiotyFinderWidg').filter()" style="margin:20px;width:90%;padding:5px" />
				</h:form>	
		</p:dialog>	


	<h:form id="formKursy">
						<p:growl id="msgst" showDetail="false"/>
						<p:dataTable id="kursy" var="kurs" value="#{strukturaKursow.strK}" editable="true" style="text-align:center" 
						rowKey="#{kurs.idStrukturaKursu}" class="shadow my-tab"
						expandedRow="#{kurs.idStrukturaKursu==strukturaKursow.wybranyKurs.idStrukturaKursu}" rowExpandMode="single"
						 widgetVar="kursPrzedmioty">
							<f:facet name="header">
							<div class="headerPanel0">
								<h:outputLabel value="Kursy" />
							</div>
								<p:commandButton type="button" icon="ui-icon-calculator" value="Dodaj" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}" style="float:right" onclick="PF('dlgRejestracjaKusu').show();"/>
								<div style="clear:both"></div>
							</f:facet>
							<p:ajax event="rowEdit" listener="#{strukturaKursow.onRowEdit}" update=":formKursy:msgst"/>
							<p:ajax event="rowToggle" listener="#{strukturaKursow.onRowTogle1}" />
							
							<p:column style="width:17px">
								<p:rowToggler />
							</p:column>
							<p:column headerText="Id" sortBy="#{kurs.idStrukturaKursu}" style="width:70px" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}">
									<h:outputText  value="#{kurs.idStrukturaKursu}"/>
							</p:column>
							<p:column headerText="Nazwa Kursu" sortBy="#{kurs.nazwa}" >
								<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{kurs.nazwa}"/></f:facet>
									<f:facet name="input"><p:inputText value="#{kurs.nazwa}" required="true"/></f:facet>
								</p:cellEditor>
							</p:column>
								<p:column headerText="Kurs" sortBy="#{kurs.kurs}">
								<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{kurs.kurs}"/></f:facet>
									<f:facet name="input">
									<p:selectOneMenu value="#{kurs.kurs}" required="true">
										 				<f:selectItem itemValue="podstawowy" itemLabel="podstawowy"/>
										 		 <f:selectItem itemValue="specjalistyczny" itemLabel="specjalistyczny"/>
									</p:selectOneMenu>
									</f:facet>
								</p:cellEditor>
							</p:column>
							<p:column headerText="Modół główny" sortBy="#{kurs.jModol}">
								<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{kurs.jModol}"/></f:facet>
									<f:facet name="input"><p:inputText value="#{kurs.jModol}" required="true"/></f:facet>
								</p:cellEditor>
							</p:column>
							<p:column headerText="Jednostka szkolna" sortBy="#{kurs.jSzkol}">
								<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{kurs.jSzkol}"/></f:facet>
									<f:facet name="input"><p:inputText value="#{kurs.jSzkol}" required="true"/></f:facet>
								</p:cellEditor>
							</p:column>
							<p:column headerText="Zagadnienie" sortBy="#{kurs.kpn}">
								<p:cellEditor >
									<f:facet name="output"><h:outputText  value="#{kurs.kpn}"/></f:facet>
									<f:facet name="input"  ><p:inputText value="#{kurs.kpn}" required="true"/></f:facet>
								</p:cellEditor>
							</p:column>
							<p:column headerText="L. godzin" style="text-align:center" sortBy="#{kurs.ileGodzin}">
								<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{kurs.ileGodzin}"/></f:facet>
									<f:facet name="input"><p:inputText value="#{kurs.ileGodzin}" required="true"/></f:facet>
								</p:cellEditor>
							</p:column>
							<p:column headerText="Komentarz" style="text-align:center;padding:7px;width:15%" sortBy="#{kurs.komentarz}">
								<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{kurs.komentarz}"/></f:facet>
									<f:facet name="input"><p:inputTextarea value="#{kurs.komentarz}" /></f:facet>
								</p:cellEditor>
							</p:column>
							<p:column headerText="Kolor" style="width:100px;background:##{kurs.kolor}" sortBy="#{kurs.kolor}" >
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value=""/></f:facet>
																	<f:facet name="input">
																		<p:colorPicker value="#{kurs.kolor}" />
																	</f:facet>
																</p:cellEditor>
													</p:column>
							<p:column style="width:55px;text-align:center" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}" >
									<f:facet name="header"><i  class="fa fa-eraser"></i></f:facet>
									<p:commandButton icon="fa fa-cut"  actionListener="#{strukturaKursow.remove}"  update=":formKursy:kursy"  
														class="buttDelete btn-sm"> 
											<f:attribute name="removeRow" value="#{kurs}" />
											<p:confirm  header=" Uwaga, próbujesz usunac wpis!" message=" Czy potwierdzasz? " /> 
									</p:commandButton>
							</p:column>
							<p:column style="width:55px;text-align:center" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}">
							<f:facet name="header"><i  class="fa fa-edit"></i></f:facet>
								<p:rowEditor />
							</p:column>
							<p:rowExpansion >
										<p:dataTable id="przedmiot"  widgetVar="dialogPrzedmioty" var="przedmiot" value="#{kurs.przedmiots}" rows="15" paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink}
													{PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,15,20,50,100" editable="true"
													emptyMessage="Brak wyników" class="przedmiotyStrukturaKursu" rowKey="#{przedmiot.idPrzedmiot}" style="border:3px solid ##{kurs.kolor}"
													rowExpandMode="single" 	expandedRow="#{przedmiot.idPrzedmiot==strukturaKursow.wybranyPrzedmiot.idPrzedmiot}" sortBy="#{przedmiot.jm},#{przedmiot.js}">
														<f:facet name="header" style="background:gray">
															<h:outputLabel value="Przedmioty" style="position:relative;top:5px"/>
															<p:commandButton icon="ui-icon-calculator"  actionListener="#{strukturaKursow.requestPrzedmiot}" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}" value="Dodaj" style="float:right" 
															onclick="PF('dlgRejestracjaPrzedmiotu').show();" update=":formPrzedmiot">
																	<f:attribute name="addRow" value="#{kurs}" />
															</p:commandButton>
													
															<div style="clear:both"></div>
														</f:facet>
														<p:ajax event="rowEdit" listener="#{strukturaKursow.onRowEditPrzedmiot}" update=":formKursy:kursy:przedmiot:temats,:formKursy:msgst"/>
														<p:ajax event="rowToggle" listener="#{strukturaKursow.onRowTogle2}" />
														<p:column style="width:17px">
																<p:rowToggler />
														</p:column>
														<p:column headerText="Id" sortBy="#{przedmiot.idPrzedmiot}" style="width:70px" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}">
															<h:outputText value="#{przedmiot.idPrzedmiot}" />
														</p:column>
														<p:column headerText="#{kurs.jModol}" sortBy="#{przedmiot.jm}" filterBy="#{przedmiot.jm}" >
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{przedmiot.jm}"/></f:facet>
																	<f:facet name="input"><p:inputText value="#{przedmiot.jm}" required="true"/></f:facet>
																</p:cellEditor>
													</p:column>
													<p:column headerText="#{kurs.jSzkol}" rendered="#{kurs.jSzkol.trim().length()>0}" sortBy="#{przedmiot.js}" filterBy="#{przedmiot.js}" >
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{przedmiot.js}"/></f:facet>
																	<f:facet name="input"><p:inputText value="#{przedmiot.js}" required="true"/></f:facet>
																</p:cellEditor>
													</p:column>
													<p:column headerText="L. godzin" sortBy="#{przedmiot.ileGodzin}">
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{przedmiot.ileGodzin}"/></f:facet>
																	<f:facet name="input"><p:inputText value="#{przedmiot.ileGodzin}" /></f:facet>
																</p:cellEditor>
													</p:column>
													<p:column headerText="Komentarz" style="width:35%;padding:7px" sortBy="#{przedmiot.komentarz}">
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{przedmiot.komentarz}"/></f:facet>
																	<f:facet name="input"><p:inputTextarea value="#{przedmiot.komentarz}" /></f:facet>
																</p:cellEditor>
													</p:column>
													
													<p:column style="width:55px;text-align:center" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}" >
														<f:facet name="header"><i  class="fa fa-eraser"></i></f:facet>
														<p:commandButton icon="fa fa-cut"  oncomplete="PF('dialogPrzedmioty').filter()" update=":formKursy:kursy:przedmiot,:formKursy:msgst" 
																		actionListener="#{strukturaKursow.removePrzedmiot}"  
																		class="buttDelete btn-sm"> 
																<f:attribute name="removeRow" value="#{przedmiot}" />
																<p:confirm  header=" Uwaga, próbujesz usunac kurs!" message=" Czy potwierdzasz? " />
														</p:commandButton>
													</p:column>
													<p:column style="width:55px;text-align:center" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}">
														<f:facet name="header"><i  class="fa fa-edit"></i></f:facet>
															<p:rowEditor />
													</p:column>
												<p:rowExpansion styleClass="tabKursyTematy">
													<p:dataTable id="temats" var="tem" value="#{przedmiot.przedmiottemats}" rows="15" paginator="true" paginatorTemplate="{FirstPageLink}
													{PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,15,20,50,100" editable="true"
													emptyMessage="Brak wyników" class="przedmiotyStrukturaKursu" rowKey="#{przedmiot.idPrzedmiot}"	>
														<f:facet name="header" >
															<h:outputLabel value="Tematy (#{strukturaKursow.godzinyWpisane(przedmiot.przedmiottemats)} godz.)" style="position:relative;top:5px"/>
															<p:commandButton icon="ui-icon-calculator"  actionListener="#{strukturaKursow.requesTemat}" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}" value="Dodaj" style="float:right" 
															onclick="PF('dlgRejestracjaTematu').show();" update="temats">
																	<f:attribute name="addRowp" value="#{przedmiot}" />
															</p:commandButton>
															<div style="clear:both"></div>
														</f:facet>
														<p:ajax event="rowEdit" listener="#{strukturaKursow.onRowEditTemat}" update=":formKursy:msgst,:przedmiotyFinderForm:pft" oncomplete="PF('przedmiotyFinderWidg').filter()"/>
														<p:column headerText="Id" sortBy="#{tem.id_przedmiotTemat}" style="width:70px" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}">
															<h:outputText value="#{tem.id_przedmiotTemat}" />
														</p:column>
														<p:column headerText="Nazwa" sortBy="#{tem.nazwa}">
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{tem.nazwa}"/></f:facet>
																	<f:facet name="input"><p:inputText value="#{tem.nazwa}" required="true"/></f:facet>
																</p:cellEditor>
														</p:column>
														<p:column headerText="Korelacja" sortBy="#{tem.korelacja}">
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{tem.korelacja}"/></f:facet>
																	<f:facet name="input"><p:inputText value="#{tem.korelacja}" required="true"/></f:facet>
																</p:cellEditor>
														</p:column>
														<p:column headerText="Godziny (l)" sortBy="#{tem.nazwa}">
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{tem.ileGodzin}"/></f:facet>
																	<f:facet name="input"><p:inputText value="#{tem.ileGodzin}" required="true"/></f:facet>
																</p:cellEditor>
														</p:column>
																<p:column headerText="Nauczyciele (l)" sortBy="#{tem.ileWykladowcow}">
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{tem.ileWykladowcow}"/></f:facet>
																	<f:facet name="input"><p:inputText value="#{tem.ileWykladowcow}" required="true"/></f:facet>
																</p:cellEditor>
														</p:column>
														<p:column headerText="Zaklad">
																<p:cellEditor>
																	<f:facet name="output">
																		<ui:repeat var="tems" value="#{strukturaKursow.getSelectedZakladFromForm(tem.zaklads)}" varStatus="st">
																			#{tems}<ui:fragment rendered="#{!st.last}">,</ui:fragment>
																		</ui:repeat>
																	</f:facet>
																	<f:facet name="input">
																			<p:selectCheckboxMenu id="multiZaklad"  value="#{strukturaKursow.selectedZaklad}" label="Zakłady" multiple="true" filter="true"
																			filterMatchMode="startWith" panelStyle="width:250px" required="true">
																					<f:selectItems value="#{strukturaKursow.selectedZakladListString}"/>
																			</p:selectCheckboxMenu>
																	</f:facet>
																</p:cellEditor>
														</p:column>
															<p:column headerText="Sale" sortBy="#{strukturaKursow.saleToString(tem.sales)}" >
																<p:cellEditor>
																	<f:facet name="output" >
																		<h:outputText value="#{strukturaKursow.saleToString(tem.sales)}"/>
																	</f:facet>
																	<f:facet name="input">
																		<p:selectCheckboxMenu  value="#{strukturaKursow.selectedSale}" label="Sale" multiple="true" filter="true"
																						filterMatchMode="startWith" panelStyle="width:250px" required="true">
																				<f:selectItems value="#{strukturaKursow.saleListGroup}"/>
																		</p:selectCheckboxMenu>
																</f:facet>
																</p:cellEditor>
															</p:column>
															<p:column headerText="Specjalizacja" >
																<p:cellEditor>
																	<f:facet name="output">
																		<ui:repeat var="temsp" value="#{strukturaKursow.getSelectedSpecjalFromForm(tem.specjalizacjas)}" varStatus="sts">
																			#{temsp}<ui:fragment rendered="#{!sts.last}">,</ui:fragment>
																		</ui:repeat>
																	</f:facet>
																	<f:facet name="input">
																		<p:selectCheckboxMenu id="multiSpecjal" value="#{strukturaKursow.selectedSpecjal}" label="Specjalizacje" multiple="true" filter="true"
																						filterMatchMode="startWith" panelStyle="width:250px" required="true">
																				<f:selectItems value="#{strukturaKursow.selectedSpecjalListString}"/>
																	</p:selectCheckboxMenu>
																</f:facet>
																</p:cellEditor>
																</p:column>
														<p:column headerText="Komentarz" sortBy="#{tem.komentarz}" style="padding:7px">
																<p:cellEditor>
																	<f:facet name="output"><h:outputText  value="#{tem.komentarz}"/></f:facet>
																	<f:facet name="input"><p:inputTextarea value="#{tem.komentarz}" /></f:facet>
																</p:cellEditor>
														</p:column>
														<p:column style="width:55px;text-align:center" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}" >
														<f:facet name="header"><i  class="fa fa-eraser"></i></f:facet>
														<p:commandButton icon="fa fa-cut"  update=":formKursy:kursy:przedmiot:temats,:formKursy:msgst,:przedmiotyFinderForm:pft" 
																		oncomplete="PF('przedmiotyFinderWidg').filter()" actionListener="#{strukturaKursow.removeTemat}"  
																		class="buttDelete btn-sm"> 
																<f:attribute name="removeRowt" value="#{tem}" />
																<p:confirm  header=" Uwaga, próbujesz usunac wpis!" message=" Czy potwierdzasz? " /> 
														</p:commandButton>
													</p:column>
													<p:column style="width:55px;text-align:center" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}">
														<f:facet name="header"><i  class="fa fa-edit"></i></f:facet>
															<p:rowEditor />
													</p:column>
														</p:dataTable>
														
												</p:rowExpansion>
								</p:dataTable>
							</p:rowExpansion>
						</p:dataTable>
						<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
      							  <p:commandButton value="Tak" type="button" styleClass="ui-confirmdialog-yes bg-danger" icon="fa fa-check" />
       							  <p:commandButton value="Nie" type="button" styleClass="ui-confirmdialog-no bg-primary" icon="fa fa-times" />
   						</p:confirmDialog>  
			</h:form>
			
	
			<h:form id="przedmiotyFinderForm">
				<p:growl id="msgpff" showDetail="false"/>
			<p:dataTable id="pft" widgetVar="przedmiotyFinderWidg" var="sf" value="#{strukturaKursow.tematyAllFind}"  rows="20"
				 	paginator="true" rowsPerPageTemplate="20,30,60,100,200,300,400" style="text-align:center;margin-top:30px" 
				 	editable="true" class="shadow">
				  <f:facet name="header">
				    <h:commandLink style="float:left;position:relative;top:5px" rendered="#{!strukturaKursow.edycjaTabeli}">
							<i  class="fa fa-file-excel" style="font-size:larger;color:#a66c20"></i>
								<p:dataExporter type="xls" target="pft" fileName="wydrukZajecPodsumowanie"/>
					</h:commandLink>
						<h:outputLabel style="top:5px;position:relative">Wszystkie przedmioty struktury:  </h:outputLabel>
									<p:selectOneMenu  value="#{strukturaKursow.wybranaStrukturaKursu}">
									<f:selectItem itemValue="" itemLabel="Wybierz"/>
										<f:selectItems value="#{strukturaKursow.strK}" var="strObj" itemValue="#{strObj.nazwa}" itemLabel="#{strObj.nazwa}"/>
									</p:selectOneMenu>
									
									<p:commandButton icon="fa fa-search" value="Szukaj" actionListener="#{strukturaKursow.findPrzedmiotyAll}" 
						 			update=":przedmiotyFinderForm:pft" style="margin-left:20px" />
						 		
						 			<p:commandButton icon="fa fa-tint" value="Czyść" actionListener="#{strukturaKursow.clearAllFilters(':przedmiotyFinderForm:pft')}" 
						 			update=":przedmiotyFinderForm:pft" style="width:100px;float:right;display:inline-block" />
						 				
						 			<p:selectBooleanButton value="#{strukturaKursow.edycjaTabeli}" onLabel="Edycja" offLabel="Edycja" onIcon="fa fa-check" offIcon="fa fa-times" 
						 			style="float:right;margin-right:10px" rendered="#{poziomUprawnien eq 1 or (poziomUprawnien eq 6)}">
										<p:ajax update=":formKursy:msgst,:przedmiotyFinderForm:pft" listener="#{strukturaKursow.rendExpTab()}"/>
									</p:selectBooleanButton>
					</f:facet>
					<f:facet name="footer">
						Łącznie zaplanowano: #{strukturaKursow.godzinyWpisane(strukturaKursow.tematyAllFind)} godzin.
					</f:facet>
					<p:ajax event="rowEdit" listener="#{strukturaKursow.onRowEditPrzedmiotAll}" 
							update=":przedmiotyFinderForm:pft,:przedmiotyFinderForm:msgpff"/>
						<p:column headerText="Zakład" style="text-align:left" sortBy="#{strukturaKursow.zakladToString(sf.zaklads)}" filterBy="#{strukturaKursow.zakladToString(sf.zaklads)}"  filterMatchMode="contains">
								<f:facet name="filter" id="filtrCheckZaklad">
													 		<p:selectOneMenu panelStyleClass="without-selectall" value="#{strukturaKursow.zakladWybranyFiltr}" onchange="PF('przedmiotyFinderWidg').filter()" scrollHeight="250" >
													 				<f:selectItem itemLabel="Wszystkie" itemValue="#{null}" nowSelectionOption="true"/>
													 				<f:selectItems value="#{strukturaKursow.selectedZakladList}" var="zl" itemValue="#{zl.nazwaSkrot}" itemLabel="#{zl.nazwaSkrot}"/>
													 		</p:selectOneMenu>
								</f:facet>
									<h:outputText value="#{strukturaKursow.zakladToString(sf.zaklads)}" />
						</p:column>
						<p:column headerText="Specjalizacja" style="text-align:left" sortBy="#{strukturaKursow.specjalToString(sf.specjalizacjas)}" filterBy="#{strukturaKursow.specjalToString(sf.specjalizacjas)}" filterMatchMode="contains">
								<f:facet name="filter" id="filtrCheckZaklad">
													 		<p:selectOneMenu panelStyleClass="without-selectall" value="#{strukturaKursow.specjalWybranyFiltr}" onchange="PF('przedmiotyFinderWidg').filter()" scrollHeight="250" >
													 				<f:selectItem itemLabel="Wszystkie" itemValue="#{null}" nowSelectionOption="true"/>
													 				<f:selectItems value="#{strukturaKursow.selectedSpecjalList}" var="sl" itemValue="#{sl.nazwa}" itemLabel="#{sl.nazwa}"/>
													 		</p:selectOneMenu>
								</f:facet>
									<h:outputText value="#{strukturaKursow.specjalToString(sf.specjalizacjas)}" />
						</p:column>
						<p:column headerText="Temat" style="text-align:left" sortBy="#{strukturaKursow.getTematInTable(sf.przedmiot,sf)}" filterBy="#{strukturaKursow.getTematInTable(sf.przedmiot,sf)}"  filterMatchMode="contains">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{strukturaKursow.getTematInTable(sf.przedmiot,sf)}" />
								</f:facet>
									<f:facet name="input">
									<h:outputText value="#{strukturaKursow.getTematInTable(sf.przedmiot,sf)}" required="true"/>
									</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Komentarz" style="text-align:left" sortBy="#{sf.komentarz}" filterBy="#{sf.komentarz}" filterMatchMode="contains">
							<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{sf.komentarz}"/></f:facet>
									<f:facet name="input"><p:inputTextarea value="#{sf.komentarz}" /></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Korelacja" sortBy="#{sf.korelacja}" filterBy="#{sf.korelacja}" filterMatchMode="contains">
							<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{sf.korelacja}"/></f:facet>
									<f:facet name="input"><p:inputText value="#{sf.korelacja}" /></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="L. godz." sortBy="#{sf.ileGodzin}" filterBy="#{sf.ileGodzin}" filterMatchMode="contains">
							<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{sf.ileGodzin}"/></f:facet>
									<f:facet name="input"><p:inputText value="#{sf.ileGodzin}" /></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="L. wykł." sortBy="#{sf.ileWykladowcow}" filterBy="#{sf.ileWykladowcow}"  filterMatchMode="contains">
							<p:cellEditor>
									<f:facet name="output"><h:outputText  value="#{sf.ileWykladowcow}"/></f:facet>
									<f:facet name="input"><p:inputText value="#{sf.ileWykladowcow}" required="true"/></f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Sale" sortBy="#{strukturaKursow.saleToString(sf.sales)}" >
																<p:cellEditor>
																	<f:facet name="output" >
																		<h:outputText value="#{strukturaKursow.saleToString(sf.sales)}"/>
																	</f:facet>
																	<f:facet name="input">
																		<p:selectCheckboxMenu id="multiSpecjal" value="#{strukturaKursow.selectedSale}" label="Sale" 
																								multiple="true" filter="true"
																								filterMatchMode="startWith" panelStyle="width:250px" 
																								required="true">
																						
																				<f:selectItems value="#{strukturaKursow.saleListGroup}" />
																	</p:selectCheckboxMenu>
																</f:facet>
																</p:cellEditor>
						</p:column>
						<p:column style="width:55px;text-align:center" rendered="#{(poziomUprawnien eq 1 or (poziomUprawnien eq 6)) and (strukturaKursow.edycjaTabeli)}">
									<f:facet name="header"><i  class="fa fa-edit"></i></f:facet>
									<p:rowEditor />
						</p:column>
			</p:dataTable>
			</h:form>

	 </ui:define>
	<ui:define name="footer">
	</ui:define>
	
</ui:composition>

