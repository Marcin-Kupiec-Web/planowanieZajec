<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/BasicTemplate.html">
	
<ui:define name="leftPane"></ui:define>

				<ui:define name="subMenuCont"><ui:include src="/WEB-INF/templates/zajecia/submenuZajecia.html"/></ui:define>
				<ui:define name="grupaSzkol"><ui:include src="/WEB-INF/templates/zajecia/plutonWybor.html"/></ui:define>
				<ui:define name="akcja">
					<p:ajax event="change" listener="#{frekwencjaWyszukiwarka.init}" update="contentOutputPanel"/>
				</ui:define>
<div style="clear:both"></div>
<ui:define name="content"> 
<p:outputPanel deferred="true" id="contentOutputPanel" rendered="#{logowanie.poziomUprawnien le 4}">
<p:panel id="contentTrescZajecia" >
		<h:form id="formObecnoscLista" rendered="#{wyborPlutonu.idPlutonWybrany>0}">
			<p:dataTable var="fr" value="#{frekwencjaWyszukiwarka.obecnoscPlutonWybrany}" widgetVar="freksTable" styleClass="dataTab shadow" style="margin-top:30px" id="dtTem"
			 paginator="true" rowsPerPageTemplate="20,50,100,200,300" rows="20" rowStyleClass="#{fr.usunieta == 'TAK' ? 'usunietyRow' : ''}"
			   paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                 currentPageReportTemplate="{startRecord}-{endRecord} z {totalRecords} wpisów" reflow="true" >
				<f:facet name="header">#{frekwencjaWyszukiwarka.ileWpisow} wpisów
				    <h:commandLink style="float:left"
								rendered="#{logowanie.poziomUprawnien eq 1}">
								<i class="fa fa-file-excel"
									style="font-size: larger; color: #a66c20"></i>
								<p:dataExporter type="xls" target="dtTem"
									fileName="frekwencjaWyszukiwarka" />
					</h:commandLink>
					 <h:commandLink style="float:left;position:relative" rendered="#{logowanie.poziomUprawnien eq 1}">
                   					<i  class="fa fa-file" style="font-size:larger;color:gray" title="export-xml"></i>
                 				   <p:dataExporter type="xml" target="dtTem" fileName="frekwencjaxml"/>
                				</h:commandLink>
                				<h:commandLink style="float:left;position:relative" rendered="#{logowanie.poziomUprawnien eq 1}">
                   					<i  class="fa fa-file-pdf" style="font-size:larger;color:#42a5f5" title="export-pdf"></i>
                 				   <p:dataExporter type="pdf" target="dtTem" preProcessor="#{fileExportProcessor.preProcessPDF}" fileName="frekwencjapdf" encoding="windows-1250" />
                				</h:commandLink>
				</f:facet>
				<p:column filterBy="#{fr.sluchacze.nazwiskoSluchacz} #{fr.sluchacze.imieSluchacz}" sortBy="#{fr.sluchacze.nazwiskoSluchacz} #{fr.sluchacze.imieSluchacz}" headerText="Słuchacz" footerText="Godz. lekc." filterMatchMode="contains" style="text-align:left">
					<h:outputText value="#{fr.sluchacze.nazwiskoSluchacz} #{fr.sluchacze.imieSluchacz}"/>
				</p:column>
				<p:column filterBy="#{fr.idObecnosc}" sortBy="#{fr.idObecnosc}" headerText="ID" footerText="ID" 
							filterMatchMode="contains" rendered="#{logowanie.poziomUprawnien eq 1}">
					<h:outputText value="#{fr.idObecnosc}"/>
				</p:column>
				<p:column filterBy="#{fr.godzinaLekcyjna}" sortBy="#{fr.godzinaLekcyjna}" headerText="G. l." footerText="Godz. l." filterMatchMode="contains" >
					<h:outputText value="#{fr.godzinaLekcyjna}"/>
				</p:column>
				<p:column filterBy="#{fr.wartosc}" sortBy="#{fr.wartosc}" headerText="Wpis" footerText="wpis" filterMatchMode="contains">
					<h:outputText value="#{fr.wartosc}"/>
				</p:column>
				<p:column filterBy="#{fr.data}" sortBy="#{fr.data}" headerText="Zreal." footerText="Zreal." filterMatchMode="contains">
					<h:outputText  value="#{fr.data}">
					<f:convertDateTime  type="date" pattern="yyyy-MM-dd"/>
					</h:outputText>
				</p:column>
					<p:column filterBy="#{fr.dataWpisu}" sortBy="#{fr.dataWpisu}" headerText="Wpisano" footerText="Wpisano" filterMatchMode="contains">
					<h:outputText value="#{fr.dataWpisu}">
					<f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
					</h:outputText>
				</p:column>
				<p:column filterBy="#{fr.imieNazwiskoUser} (#{fr.idUsers})" sortBy="#{fr.imieNazwiskoUser} (#{fr.idUsers})" headerText="Wpisał" footerText="Wpisał" filterMatchMode="contains" style="text-align:left">
					<h:outputText value="#{fr.imieNazwiskoUser}"/>
					<h:outputText value=" (#{fr.idUsers})" rendered="#{logowanie.poziomUprawnien==1}"/>
				</p:column>
				<p:column rendered="#{logowanie.poziomUprawnien==1}" filterBy="#{fr.imieNazwiskoUserUsunal} (#{fr.idUserUsunieta})" sortBy="#{fr.imieNazwiskoUserUsunal} (#{fr.idUserUsunieta})" headerText="Us.usu." footerText="Us.usu." filterMatchMode="contains">
					<h:outputText value="#{fr.imieNazwiskoUserUsunal}"/>
					<h:outputText value=" (#{fr.idUserUsunieta})" rendered="#{fr.idUserUsunieta > 0}"/>
				</p:column>
				<p:column rendered="#{logowanie.poziomUprawnien==1}" filterBy="#{fr.dataUsunieta}" sortBy="#{fr.dataUsunieta}" headerText="Usunięto" footerText="Usunięto" filterMatchMode="contains">
					<h:outputText value="#{fr.dataUsunieta}">
						<f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
					</h:outputText>
				</p:column>
			</p:dataTable>
		</h:form>
							
 </p:panel>
 </p:outputPanel>
 </ui:define>
	<ui:define name="footer">
	</ui:define>

	
</ui:composition>