<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/BasicTemplate.html">
	
	<ui:define name="leftPane"></ui:define>

				<ui:define name="subMenuCont"><ui:include src="/WEB-INF/templates/zajecia/submenuZajecia.html"/></ui:define>
				<ui:define name="grupaSzkol"><ui:include src="/WEB-INF/templates/zajecia/plutonWybor.html"/></ui:define>
				<ui:define name="akcja">
						<p:ajax event="change" listener="#{ocenyWyszukiwarka.init}" update="contentOutputPanel"/>
				</ui:define>
	<div style="clear:both"></div>
<ui:define name="content"> 
<p:outputPanel deferred="true" id="contentOutputPanel" rendered="#{logowanie.poziomUprawnien=='7' or (logowanie.poziomUprawnien le 4)}">
<p:panel id="contentTrescZajecia" >
		<h:form id="formOcenyLista" >
			<p:dataTable var="to" value="#{ocenyWyszukiwarka.ocenyList}" widgetVar="ocensTable" styleClass="shadow dataTab" style="margin-top:30px" id="dtOcen"
			  paginator="true" rowsPerPageTemplate="20,50,100,200,300" rows="20" reflow="true"
			  rowStyleClass="#{to.usunieta || to.ocenyNglowek.usunieta?'usunietyRow' : ''} #{to.dataWpisu > logowanie.ostatnieLogowanie and logowanie.poziomUprawnien=='7' ? 'bg-active-info' : ''}" 
			  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
              currentPageReportTemplate="{startRecord}-{endRecord} z {totalRecords} wpisów"
			   emptyMessage="Brak danych!" >
				<f:facet name="header">#{ocenyWyszukiwarka.ocenyList.size()} ocen
				    <h:commandLink style="float:left"
								rendered="#{logowanie.poziomUprawnien eq 1}">
								<i class="fa fa-file-excel"
									style="font-size: larger; color: #a66c20"></i>
								<p:dataExporter type="xls" target="dtOcen"
									fileName="ocenyxls" />
					</h:commandLink>
						 <h:commandLink style="float:left;position:relative" rendered="#{logowanie.poziomUprawnien eq 1}">
                   					<i  class="fa fa-file" style="font-size:larger;color:gray" title="export-xml"></i>
                 				   <p:dataExporter type="xml" target="dtOcen" fileName="ocenyxml"/>
                				</h:commandLink>
                				<h:commandLink style="float:left;position:relative" rendered="#{logowanie.poziomUprawnien eq 1}">
                   					<i  class="fa fa-file-pdf" style="font-size:larger;color:#42a5f5" title="export-pdf"></i>
                 				   <p:dataExporter type="pdf" target="dtOcen" fileName="ocenypdf" preProcessor="#{fileExportProcessor.preProcessPDF}" encoding="windows-1250"/>
                				</h:commandLink>
				</f:facet>
				<p:column filterBy="#{to.ocenaWartosc}" sortBy="#{to.ocenaWartosc}" headerText="Oc." footerText="Oc." filterMatchMode="contains">
					<h:outputText value="#{to.ocenaWartosc}" style="font-family:times;font-size:15px;margin:2px;background:##{to.kolor};
				padding:1px 7px 1px 7px;border:1px solid #b7b7b7;border-radius:3px; "/>
				</p:column>
				<p:column filterBy="#{to.sluchacze.nazwiskoSluchacz} #{to.sluchacze.imieSluchacz}" sortBy="#{to.sluchacze.nazwiskoSluchacz} #{to.sluchacze.imieSluchacz}" 
						  headerText="Słuch." footerText="Słuch." 
					 	  filterMatchMode="contains" style="text-align:left" rendered="#{logowanie.poziomUprawnien!='7'}">
					<h:outputText value="#{to.sluchacze.nazwiskoSluchacz} #{to.sluchacze.imieSluchacz}"/>
				</p:column>
				<p:column rendered="#{logowanie.poziomUprawnien==1}" filterBy="#{to.idOcena}" sortBy="#{to.idOcena}" headerText="ID" footerText="ID" 
						  filterMatchMode="contains">
					<h:outputText value="#{to.idOcena}"/>
				</p:column>
				<p:column filterBy="#{to.ocenyNglowek.przedmiot.jm}" sortBy="#{to.ocenyNglowek.przedmiot.jm}" headerText="JM" footerText="JM" filterMatchMode="contains">
					<h:outputText value="#{to.ocenyNglowek.przedmiot.jm}"/>
				</p:column>
				<p:column filterBy="#{to.ocenyNglowek.przedmiot.js}" sortBy="#{to.ocenyNglowek.przedmiot.js}" headerText="JS" footerText="JS" filterMatchMode="contains">
					<h:outputText value="#{to.ocenyNglowek.przedmiot.js}"/>
				</p:column>
				<p:column filterBy="#{to.ocenyNglowek.zadanie}" sortBy="#{to.ocenyNglowek.zadanie}" headerText="Zad." footerText="Zad." filterMatchMode="contains">
					<h:outputText value="#{to.ocenyNglowek.zadanie}"/>
				</p:column>
				<p:column filterBy="#{to.ocenyNglowek.naglowek}" sortBy="#{to.ocenyNglowek.naglowek}" headerText="Opis" footerText="Opis" filterMatchMode="contains" style="text-align:left">
					<h:outputText value="#{to.ocenyNglowek.naglowek}"/>
				</p:column>
				<p:column filterBy="#{to.komentarz}" sortBy="#{to.komentarz}" headerText="Kom." footerText="Kom." filterMatchMode="contains" 
				style="text-align:left">
					<h:outputText value="#{to.komentarz}"/>
				</p:column>
				<p:column rendered="#{logowanie.poziomUprawnien!='7'}" filterBy="#{to.dataOcena.toString()}" sortBy="#{to.dataOcena}" headerText="Data" footerText="Data" 
						  filterMatchMode="contains" >
					<h:outputText  value="#{to.dataOcena}">
						<f:convertDateTime  type="date" pattern="yyyy-MM-dd"/>
					</h:outputText>
				</p:column>
					<p:column filterBy="#{to.dataWpisu}" sortBy="#{to.dataWpisu}" headerText="Wpisano" footerText="Wpisano" 
					filterMatchMode="contains" >
					<h:outputText value="#{to.dataWpisu}">
					 <f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
					</h:outputText>
				</p:column>
				<p:column filterBy="#{to.idUzytkownik.imieUsers} #{to.idUzytkownik.nazwiskoUsers}" 
						  sortBy="#{to.idUzytkownik.imieUsers} #{to.idUzytkownik.imieUsers}" headerText="Wpisał" 
						  footerText="Wpisał" filterMatchMode="contains" style="text-align:left;">
					<h:outputText value="#{to.idUzytkownik.imieUsers} #{to.idUzytkownik.nazwiskoUsers}"/>
				</p:column>
				<p:column rendered="#{logowanie.poziomUprawnien==1}" filterBy="#{to.imieNazwiskoUserUsunal} (#{to.imieNazwiskoUserUsunalId}) #{to.dataRemove}" 
				sortBy="#{to.imieNazwiskoUserUsunal} (#{to.imieNazwiskoUserUsunalId}) #{to.dataRemove}" headerText="Usu.Oc" 
						  footerText="Usu.Oc" filterMatchMode="contains" style="width:10%">
							<h:outputText value="#{to.imieNazwiskoUserUsunal}" />
							<h:outputText value=" (#{to.imieNazwiskoUserUsunalId})" rendered="#{to.imieNazwiskoUserUsunalId > 0}" />
							<h:outputText value="#{to.dataRemove}" style="display:block">
								 <f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
							</h:outputText>
				</p:column>
				<p:column rendered="#{logowanie.poziomUprawnien==1}" filterBy="#{to.ocenyNglowek.imieNazwiskoUserUsunal} (#{to.ocenyNglowek.imieNazwiskoUserUsunalId}) #{to.ocenyNglowek.kiedyUsunal}" 
						  sortBy="#{to.ocenyNglowek.imieNazwiskoUserUsunal} (#{to.ocenyNglowek.imieNazwiskoUserUsunalId}) #{to.ocenyNglowek.kiedyUsunal}" headerText="Usu.kol" footerText="Usu.kol" 
						  filterMatchMode="contains" >
					<h:outputText value="#{to.ocenyNglowek.imieNazwiskoUserUsunal}" />
					<h:outputText value=" (#{to.ocenyNglowek.imieNazwiskoUserUsunalId})" rendered="#{to.ocenyNglowek.imieNazwiskoUserUsunalId > 0}" />
					<h:outputText value="#{to.ocenyNglowek.kiedyUsunal}" style="display:block">
								 <f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
					</h:outputText>
				</p:column>
				
			</p:dataTable>
		</h:form>
							
 </p:panel>
 </p:outputPanel>
 </ui:define>
	<ui:define name="footer">
	</ui:define>

	
</ui:composition>