<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/BasicTemplate.html">
	
	<ui:define name="leftPane"></ui:define>
		<ui:define name="subMenuCont"><ui:include src="/WEB-INF/templates/zajecia/submenuZajecia.html"/></ui:define>
		<ui:define name="grupaSzkol"><ui:include src="/WEB-INF/templates/zajecia/plutonWybor.html"/></ui:define>
		<ui:define name="akcja">
				<p:ajax event="change" listener="#{tematyLista.init}" update="contentOutputPanel"/>
		</ui:define>
<ui:define name="content">
<p:outputPanel deferred="true" id="contentOutputPanel"> 
	<p:panel id="contentTrescZajecia" rendered="#{logowanie.poziomUprawnien le 7}">
	<h:form id="formTematyLista" rendered="#{wyborPlutonu.idPlutonWybrany>0}">
			<p:dataTable var="temats" value="#{tematyLista.tematyPlutonWybrany}" widgetVar="tematsTable" styleClass="dataTab shadow" 
			style="margin-top:30px" id="dtTem" emptyMessage="Brak danych!" reflow="true"
			 paginator="true" rowsPerPageTemplate="20,50,100" rows="20" rowStyleClass="#{temats.tematUsuniety == 'TAK' ? 'usunietyRow' : ''}"
			  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
              currentPageReportTemplate="{startRecord}-{endRecord} z {totalRecords} wpisów" locale="pl">
				<f:facet name="header">
				<h:outputText value="W plutonie zrealizowano: #{tematyLista.ileTematow} godz."/>
				    <h:commandLink style="float:left" rendered="#{logowanie.poziomUprawnien eq 1}">
								<i class="fa fa-file-excel"
									style="font-size: larger; color: #a66c20"></i>
								<p:dataExporter type="xls" target="dtTem"
									fileName="tematyWyszukiwarka" />
					</h:commandLink>
					 <h:commandLink style="float:left;position:relative" rendered="#{logowanie.poziomUprawnien eq 1}">
                   					<i  class="fa fa-file" style="font-size:larger;color:gray" title="export-xml"></i>
                 				   <p:dataExporter type="xml" target="dtTem" fileName="tematyxml"/>
                	</h:commandLink>
                				<h:commandLink style="float:left;position:relative" rendered="#{logowanie.poziomUprawnien eq 1 or (logowanie.poziomUprawnien eq 5)}">
                   					<i  class="fa fa-file-pdf" style="font-size:larger;color:#42a5f5" title="export-pdf"></i>
                 				   <p:dataExporter type="pdf" target="dtTem" fileName="tematypdf" preProcessor="#{fileExportProcessor.preProcessPDF}" encoding="windows-1250"/>
                				</h:commandLink>
			
						<div style="clear:both"></div>
				</f:facet>
				<p:column filterBy="#{temats.tematyGdzl}" sortBy="#{temats.tematyGdzl}" headerText="G.l." footerText="G.l." filterMatchMode="contains">
					<h:outputText value="#{temats.tematyGdzl}"/>
				</p:column>
				<p:column headerText="Id" rendered="#{logowanie.poziomUprawnien eq 1}" filterBy="#{temats.idTematy}" sortBy="#{temats.idTematy}">
								<h:outputText value="#{temats.idTematy}" rendered="#{temats.idTematy!=0}"/>
				</p:column>
				<p:column filterBy="#{temats.zrealizowaneCzas}" sortBy="#{temats.zrealizowaneCzas}"  headerText="Dat.rea." footerText="Dat.rea." filterMatchMode="contains">
					<h:outputText value="#{temats.zrealizowaneCzas}">
						<f:convertDateTime  type="date" pattern="yyyy-MM-dd"/>
					</h:outputText>
				</p:column>
				<p:column filterBy="#{temats.JM_tematy}" sortBy="#{temats.JM_tematy}" headerText="#{wyborPlutonu.jmpw}" footerText="#{wyborPlutonu.jmpw}" filterMatchMode="contains">
					<h:outputText value="#{temats.JM_tematy}"/>
				</p:column>
				<p:column filterBy="#{temats.JS_tematy}" sortBy="#{temats.JS_tematy}" headerText="#{wyborPlutonu.jspw}" footerText="#{wyborPlutonu.jspw}" filterMatchMode="contains"  rendered="#{wyborPlutonu.jspw!=null}">
					<h:outputText value="#{temats.JS_tematy}"/>
				</p:column>
				<p:column filterBy="#{temats.KPN_tematy}" sortBy="#{temats.KPN_tematy}" headerText="#{wyborPlutonu.kpnpw}" footerText="#{wyborPlutonu.kpnpw}" filterMatchMode="contains">
					<h:outputText value="#{temats.KPN_tematy}"/>
				</p:column>
				<p:column style="text-align:left" filterBy="#{temats.ktoWpisal} (#{temats.idWpisal})" sortBy="#{temats.ktoWpisal} (#{temats.idWpisal})" 
				headerText="Wpisał" footerText="Wpisał" filterMatchMode="contains"  rendered="#{logowanie.poziomUprawnien!='7'}">
					<h:outputText value="#{temats.ktoWpisal}"/>
					<h:outputText value=" (#{temats.idWpisal})" rendered="#{logowanie.poziomUprawnien eq 1}"/>
				</p:column>
				<p:column style="text-align:left" filterBy="#{temats.ktoZrealizowal}" sortBy="#{temats.ktoZrealizowal}" headerText="Zreal." footerText="Zreal." filterMatchMode="contains">
					<h:outputText value="#{temats.ktoZrealizowal}"/>
				</p:column>
				<p:column filterBy="#{temats.kiedyUsuniety}" rendered="#{logowanie.poziomUprawnien eq 1}" sortBy="#{temats.kiedyUsuniety}" headerText="Dat.us." 
				footerText="Dat.us." filterMatchMode="contains" >
					<h:outputText value="#{temats.kiedyUsuniety}">
						<f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
					</h:outputText>
				</p:column>
				<p:column sortBy="#{temats.ktoUsunalStr} (#{temats.ktoUsuna})" filterBy="#{temats.ktoUsunalStr} (#{temats.ktoUsuna})" headerText="Usunął" footerText="Usunął" 
							filterMatchMode="contains"  rendered="#{logowanie.poziomUprawnien eq 1}">
					<h:outputText value="#{temats.ktoUsunalStr}" />
					<h:outputText value=" (#{temats.ktoUsuna})" rendered="#{temats.ktoUsuna > 0}"/>
				</p:column>				
			</p:dataTable>			 
		</h:form>
	</p:panel>
</p:outputPanel>
</ui:define>
	
<ui:define name="footer"></ui:define>
</ui:composition>
