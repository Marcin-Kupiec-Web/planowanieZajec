<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/BasicTemplate.html">
	

	<ui:define name="content"> 
		<p:outputPanel deferred="true" id="contentTrescZajecia">						
						<div class="ui-fluid">
						    <div class="ui-g-12 ui-md-12 ui-lg-2 shadow" style="background:whitesmoke;z-index:1">
								   <ui:include src="/WEB-INF/templates/wiadomosciLeftPanelSluchacz.html"/>
						    </div>
						    <div class="ui-g-12 ui-md-12 ui-lg-10 ui-g-nopad bg-white shadow"  style="min-height: 100vh;padding:20px">
										<h3 class="first">Wysłane wiadomości</h3>
										<h:form>
										<p:dataTable var="wysw" id="wiadomosciTable" value="#{wiadomosciWyslaneSluchacz.wpisujacyUser.wiadomoscis}" sortBy="#{wysw.dataWpisu}"
										    rowsPerPageTemplate="20,50,100" rows="20" sortFunction="#{wiadomosciWyslaneSluchacz.sortByDate}"
										     paginator="true" tableStyle="width:auto!important"
										     currentPageReportTemplate="{startRecord}-{endRecord} z {totalRecords} wiadomości"
										     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
										         <p:column style="width:17px">
           												 <p:rowToggler />
       											 </p:column>
										        <p:column headerText="Data" footerText="Data" sortBy="#{wysw.dataWpisu}" 
										        filterBy="#{wysw.dataWpisu}" filterMatchMode="contains" style="width:22%; text-align:center" priority="3">
										            <h:outputText value="#{wysw.dataWpisu}">
										             <f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
										             </h:outputText>
										        </p:column>
										   		         <p:column headerText="Kto" footerText="Kto" sortBy="#{wysw.UsertoString()}" 
										        				 filterBy="#{wysw.UsertoString()}" 
										        				 filterMatchMode="contains" style="width:30%">
													<h:outputLabel value="#{wysw.UsertoString()}"/>
										        </p:column>
										            <p:column headerText="Temat" footerText="Temat" sortBy="#{wysw.tytul}" filterMatchMode="contains" filterBy="#{wysw.tytul}">
										                <h:outputText value="#{wysw.tytul}" />
										            </p:column>
										  		 <p:rowExpansion class="shadow">
											                <h:outputText value="#{wysw.tresc}" escape="false"/>
											                      <div style="width:100%;text-align:right;font-size:smaller;font-style:italic">
										  		           		         <h:outputText value="#{wysw.dataWpisu}">
										             							<f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
										           					  </h:outputText>
										  		           	    </div>
											       </p:rowExpansion>
										    </p:dataTable>
											<p:blockUI block="wiadomosciTable" trigger="wiadomosciTable" />
										</h:form>
						    </div>
					</div>
					<div style="clear:both"></div>
	</p:outputPanel>
 </ui:define>
<ui:define name="footer"></ui:define>
</ui:composition>