<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/BasicTemplate.html">
	
	<ui:define name="content"> 
		<p:outputPanel deferred="true" id="contentTrescZajecia">						
						<div class="ui-fluid">
						    <div class="ui-g-12 ui-md-12 ui-lg-2 shadow" style="background:whitesmoke;z-index:1">
								   <ui:include src="/WEB-INF/templates/wiadomosciLeftPanel.html"/>
						    </div>
						    <div class="ui-g-12 ui-md-12 ui-lg-10 ui-g-nopad bg-white shadow"  style="min-height: 100vh;padding:20px">
										<h3 class="first">Wysłane wiadomości</h3>
										<h:form>
										<p:dataTable var="wysw" id="wiadomosciTable" value="#{wiadomosciWyslane.wiadomosciWyslaneUser}" sortBy="#{wysw.dataWpisu}"
										    rowsPerPageTemplate="20,50,100" rows="20" sortFunction="#{wiadomosciWyslane.sortByDate}"
										     paginator="true" tableStyle="width:100%!important"
										     currentPageReportTemplate="{startRecord}-{endRecord} z {totalRecords} wiadomości"
										     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
										         <p:column style="width:17px">
           												 <p:rowToggler />
       											 </p:column>
										        <p:column headerText="Data" footerText="Data" style="width:15%" sortBy="#{wysw.dataWpisu}" 
										        filterBy="#{wysw.dataWpisu}" filterMatchMode="contains" priority="3">
										            <h:outputText value="#{wysw.dataWpisu}">
										             <f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
										             </h:outputText>
										        </p:column>
										         <p:column headerText="Kto" footerText="Kto" sortBy="#{wysw.pluton.kompania.nazwaKompania} #{wysw.pluton.nazwaPluton} #{wysw.pluton.oznaczenieSzkolenia} #{wysw.SluchacztoString()} #{wysw.UsertoString()}" 
										         filterBy="#{wysw.pluton.kompania.nazwaKompania} #{wysw.pluton.nazwaPluton} #{wysw.pluton.oznaczenieSzkolenia} #{wysw.SluchacztoString()} #{wysw.UsertoString()}" 
										         filterMatchMode="contains" style="width:30%">
										               			<h:outputText value="Pluton: #{wysw.pluton.kompania.nazwaKompania} #{wysw.pluton.nazwaPluton} #{wysw.pluton.oznaczenieSzkolenia}" rendered="#{wysw.pluton!=null}"/>
										               			<h:outputLabel value="#{wysw.SluchacztoString()}"/>
														 		<h:outputLabel value="#{wysw.UsertoString()}"/>
										        </p:column>
										            <p:column headerText="Temat" footerText="Temat" sortBy="#{wysw.tytul}" filterMatchMode="contains" filterBy="#{wysw.tytul}"
										            style="width:100%">
										                <h:outputText value="#{wysw.tytul}" />
										            </p:column>
										  		 <p:rowExpansion class="shadow">
											                <h:outputText value="#{wysw.tresc}" escape="false"/>
											                      <div style="width:100%;text-align:right;font-size:smaller;font-style:italic">
										  		           		         <h:outputText value="#{wysw.dataWpisu}">
										             							<f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
										           					  </h:outputText>
										  		           	    </div>
											       </p:rowExpansion>
										    </p:dataTable>
											<p:blockUI block="wiadomosciTable" trigger="wiadomosciTable" /> 
										</h:form>
						    </div>
					</div>
						<div style="clear:both"></div>
	</p:outputPanel>
 </ui:define>
<ui:define name="footer"></ui:define>
</ui:composition>