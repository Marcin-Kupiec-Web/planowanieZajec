<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/BasicTemplate.html">
	

	<ui:define name="content"> 
		<p:outputPanel deferred="true" id="contentTrescZajecia">
						<div class="ui-fluid">
						    <div class="ui-g-12 ui-md-12 ui-lg-2 shadow" style="background:whitesmoke;z-index:1">
								<ui:include src="/WEB-INF/templates/wiadomosciLeftPanel.html"/>											
						    </div>
						    <div class="ui-g-12 ui-md-12 ui-lg-10 ui-g-nopad bg-white shadow"  style="min-height: 100vh;padding:20px">
										<h3 class="first">Odebrane wiadomości</h3>
										<h:form>
										    <p:dataTable var="wysw" id="wiadomosciTable" value="#{odebraneKadra.wiadomosciOdebraneUser}" 
										    sortBy="#{wysw.dataWpisu}" tableStyle="width:100%!important" 
										    rowsPerPageTemplate="20,50,100" rows="20"  sortFunction="#{odebraneKadra.sortByDate}"
										     paginator="true"
										     currentPageReportTemplate="{startRecord}-{endRecord} z {totalRecords} wiadomości"
										     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
										     rowStyleClass="#{wysw.dataWpisu > logowanie.ostatnieLogowanie ? 'wiadomosciNieprzeczytane' : 'wiadomosciPrzeczytane'}">
										         <p:column style="width:17px">
           												 <p:rowToggler />
       											 </p:column>
										        <p:column headerText="Data" footerText="Data" style="width:15%" sortBy="#{wysw.dataWpisu}" 
										        filterBy="#{wysw.dataWpisu}" filterMatchMode="contains"  priority="3">
										            <h:outputText value="#{wysw.dataWpisu}">
										             <f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
										             </h:outputText>
										        </p:column>
										         <p:column headerText="Kto" footerText="Kto" sortBy="#{wysw.user.nazwiskoUsers} #{wysw.user.imieUsers} #{wysw.user.zakladUsers} #{wysw.userStudent.nazwiskoUsers} #{wysw.userStudent.imieUsers} #{wysw.userStudent.kompania}/#{wysw.userStudent.pluton}/#{wysw.userStudent.szkolenie}" 
										         filterBy="#{wysw.user.nazwiskoUsers} #{wysw.user.imieUsers} #{wysw.user.zakladUsers} #{wysw.userStudent.nazwiskoUsers} #{wysw.userStudent.imieUsers} #{wysw.userStudent.kompania}/#{wysw.userStudent.pluton}/#{wysw.userStudent.szkolenie}" style="width:30%" filterMatchMode="contains">
										            <h:outputText value="#{wysw.user.nazwiskoUsers} #{wysw.user.imieUsers} #{wysw.user.zakladUsers}" rendered="#{wysw.user.nazwiskoUsers!=null}"/>
										            <h:outputText value="#{wysw.userStudent.nazwiskoUsers} #{wysw.userStudent.imieUsers}" rendered="#{wysw.userStudent.nazwiskoUsers!=null}"/>
										            <h:outputText value=" #{wysw.userStudent.kompania}/#{wysw.userStudent.pluton}/#{wysw.userStudent.szkolenie}" rendered="#{wysw.userStudent.nazwiskoUsers!=null}"/>
										        </p:column>
										            <p:column headerText="Temat" footerText="Temat" sortBy="#{wysw.tytul}" filterBy="#{wysw.tytul}" filterMatchMode="contains">
										                <h:outputText value="#{wysw.tytul}" />
										            </p:column>
										  		 <p:rowExpansion class="shadow">
											                <h:outputText value="#{wysw.tresc}" escape="false"/>
											                <div style="width:100%;text-align:right;font-size:smaller;font-style:italic">
											                      	 <h:outputText value="#{wysw.user.nazwiskoUsers} #{wysw.user.imieUsers} "/>
										  		           		         <h:outputText value="#{wysw.dataWpisu}">
										             							<f:convertDateTime  type="date" pattern="yyyy-MM-dd HH:mm"/>
										           					  </h:outputText>
										  		           	</div>
											       </p:rowExpansion>
										    </p:dataTable>
										    <p:blockUI block="wiadomosciTable" trigger="wiadomosciTable" /> 
										</h:form>
									
						    </div>
					</div>
			<div style="clear:both"></div>
	</p:outputPanel>
 </ui:define>
<ui:define name="footer"></ui:define>
</ui:composition>